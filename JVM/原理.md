# JVM原理
## 整体结构![[JVM的整体结构.png]]

## [[类加载子系统]]

## 运行时数据区（JVM在运行Java程序时分配的内存区域）
- [[方法区]]
- [[堆]]
- [[java栈]]
- [[本地方法栈]]
- [[程序计数器]]

## 执行引擎（执行引擎位于JVM的核心逻辑组件，直接与运行时数据区交互。它的主要功能是执行字节码，将字节码解释或编译成机器码，然后在具体的机器上执行），以下是主要执行引擎的主要任务
- 解释器（Interpreter）逐行解释执行字节码，将其转换为相应的机器指令并执行，并将频繁执行的代码标记为热点代码
- 即时**编译器**（JIT Compiler）将热点代码编译为本地机器码（缓存），后续执行这些方法时，直接运行已编译好的机器码，提高执行效率
	- **C1编译器（Client Compiler）：** 适用于客户端应用程序，启动速度快，编译时间短，但生成的机器码优化程度相对较低。
	- **C2编译器（Server Compiler）：** 适用于服务器端应用程序，启动速度相对较慢，编译时间较长，但生成的机器码经过了更多优化，执行效率更高
- 工作流程
	- **加载字节码：** 类加载器（Class Loader）将字节码文件加载到JVM中
	- **验证字节码：** 字节码验证器检查字节码的正确性和安全性。
	- **准备和解析：** 分配内存空间，解析符号引用。
	- **初始化：** 初始化类变量和静态代码块
	- **解释或编译：** 通过解释器或JIT编译器执行字节码
	- **执行：** 实际执行字节码指令

## [[垃圾收集器]]
- 垃圾收集器（Garbage Collector, GC）不直接参与字节码的执行，执行引擎和垃圾收集器在内存管理和代码执行方面紧密协作，垃圾收集器负责管理堆内存，自动回收不再使用的对象，确保内存的高效利用。垃圾收集器会在后台运行，必要时暂停应用线程以执行垃圾回收

## [[本地接口]]
- 本地接口提供与本地代码（通常是C/C++）交互的能力，使得Java程序可以调用本地方法。

